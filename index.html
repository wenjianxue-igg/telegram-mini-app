<!DOCTYPE html>
<html lang="en">
    <head>
        <script src="https://telegram.org/js/games.js"></script>
        <script src="https://telegram.org/js/telegram-web-app.js"></script>
        <meta charset="UTF-8" />
        <link rel="icon" type="image/svg+xml" href="/vite.svg" />
        <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
        />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Vite + React + TS</title>
            <style>
        body {
            background-color: black;
            color: white;
        }
    </style>
    </head>
<body>
    <script src="https://telegram.org/js/games.js"></script>
    <h1>我的第一个标题!</h1>
    <p>我的第一个段落。</p>
    <pre id="log"></pre>

    <script>(function() {
    var originalConsoleLog = console.log; // 保存原始的console.log函数
    var logElement = document.getElementById('log'); // 获取页面中的日志显示元素

    // 重写console.log函数
    console.log = function() {
        var message = Array.prototype.slice.call(arguments).map(function(arg) {
            return typeof arg === 'object' ? JSON.stringify(arg) : arg;
        }).join(' ');

        // 调用原始的console.log
        originalConsoleLog.apply(console, arguments);

        // 将日志信息添加到页面元素中
        logElement.textContent += message + '\n';
    };
})();</script>
    <button onclick="TelegramGameProxy.shareScore()">Share score</button>
 <script>
        // 检查是否在 Telegram Web App 环境中
        if (window.Telegram.WebApp) {
            const tg = window.Telegram.WebApp;

            // 初始化 Web App
            tg.ready();

            // 设置 Web App 的背景颜色
            tg.setBackgroundColor("#ffffff");
            tg.setHeaderColor("#FF0000")
            // 设置 Web App 的主按钮
            tg.MainButton.text = "Main Button";
            tg.MainButton.show();

            // 处理发送数据按钮点击事件
            document.getElementById("sendDataButton").addEventListener("click", () => {
                tg.MainButton.text = "Main Button！！！";
            tg.MainButton.show();
                const data = { message: "Hello from Web App!" };
                // tg.sendData(JSON.stringify(data));
                
            });

            // 处理关闭按钮点击事件
            document.getElementById("closeButton").addEventListener("click", () => {
                tg.close();
            });

            // 监听 Web App 的关闭事件
            tg.onEvent("mainButtonClicked", () => {
                 console.log(""Main button clicked!");
                tg.setHeaderColor("#ffffff")
                alert("Main button clicked!");
                // 调用 Telegram 支付 API
                    tg.openInvoice({
                    title: "Product Name",
                    description: "Product Description",
                    payload: "unique_payload",
                    provider_token: "",
                    start_parameter: "",
                    currency: "XTR",
                    prices: [{ label: "Product", amount: 1 }] // 价格以最小货币单位表示（例如：1000 表示 $10.00）
                });
            });

            // 监听 Web App 的关闭事件
            tg.onEvent("backButtonClicked", () => {
                alert("Back button clicked!");
            });

            // 监听 Web App 的关闭事件
            tg.onEvent("viewportChanged", (viewport) => {
                console.log("Viewport changed:", viewport);
            });

            // 监听 Web App 的关闭事件
            tg.onEvent("themeChanged", (theme) => {
                console.log("Theme changed:", theme);
            });
        } else {
            alert("This page is not running inside Telegram Web App.");
        }
    </script>
    
</body>
</html>
